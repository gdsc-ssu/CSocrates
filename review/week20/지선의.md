# CloudFront

CDN

- 네트워크 설계로 인해 발생하는 통신 지연을 줄이기 위한 것
- 다른 리전에서 접근할때의 지연 시간을 줄이기 위해
- 우리나라에만 4개의 데이터 센터 존재
- 제공 방법
    - 객체에 대한 요청을 보냄
    - 사용자 입장에서 가장 가까운 클라우드프론트로 리다이렉팅(DNS에서 가장 가까운 클라우드 프론트 정보를 가지고 있음)
    - 다음부터는 캐시서버랑 똑같이 요청된 객체가 있으면 사용자에게 반환

클라우드 프론트는 캐시를 두 단계로 나눠서 관리

- 전역 엣지 로케이션인 POP은 사용자에게 가장 가까운 위치
- 리전 엣지 캐시는 리전내에 위치하며 POP을 도와줌

사용 사례

- 클라우드 프론트를 효과적으로 사용할 수 있는 것 중 하나는 라이브 스트리밍
- 유튜브는 일본 트패픽으로 사용
- 라이브 스트리밍은 초당으로 파일일 계속 업데이트 시키면서 가져옴
- 그래서 이 딜레이를 줄이는게 핵심. 그래서 CDN 사용하거나 각 국에 캐시서버를 둬서 관리하는 것
- 보안에 있어서도 쉽게 처리 가능(접속 차단)
- 데이터 백업 용도로도 사용 가능

정책

- 정책도 지정 가능해서 사용자가 미리 지정해줄 수도 있고 프록시 역할도 해줌

장점

- 지연 시간을 줄일 수 있음
- 보안 관리 용이(DDos)
- 인증서 관리와 자동 갱신 제공

요금

- 데이터를 전송할때만 청구
- 하지만 비쌈
- 대부분 동영상이나 대규모 파이를 보낼때 사용하기 때문에 비쌀 수 밖에 없음

기타

- 캐시 기능으로 인해 원본 업데이트가 안될 수 있음(수정할때)
    - 이럴때 무효화 기능을 총해 수정된 파일이 캐시로 바로 반영하도록 설정할 수 있음

Q. 클라우드 프론트를 사용하면 프록시처럼 헤더 붙여서 보낼 수 있나?
A. 가능. 리다이렉트 가능

# CIDR

클래스 없는 도매인 간 라우팅 기법

서브넷팅은 CIDR의 서브셋

표기법

- A.B.C.D/N
- 분리된 4개의 네트워크와 각 62개의 호스트를 가진 네트워크를 사용한다는 것을 의미

AWS CIDR

관리형 접두사 목록

- 하나 이상의 CIDR 블록 세트
- 접두사 목록을 사용해서 보안 그룹과 라우팅 테이블을 보다 쉽게 구성하고 유지관리 가능

SSH를 허용하는 IP주소가 많아지게 되면? 관리가 어려워짐

이를 위해 관리형 접두사 목록을 사용함

문제 : 대부분 작동 시간 중에는 다른 리전의 가상 데스크톱에서 액세스하지만 테스트 기간에는 집 PC에서 접근해야 gka

해결 : AWS가 제공하는 IP 주소 범위 목록을 사용해 해당 리전의 WorkSpces 게이트웨이의 CIDR 범위 목록을 포함하는 관리형 접두사 목록을 각각 만들어 보안 그룹에 연결한다. 테스트를 위해서는 임시로 집의 IP 주소를 접두사 목록에 추가했다가 테스트 종료 시 IP 주소를 삭제한다.