
### 이게 뭐에요?

VPC 접근 가능성 분석기 정도로 해석할 수 있을 듯하다. **이는 네트워크 트레이스 용 도구로 내 AWS 인스턴스간의 네트워크 연결 방식을 트레이싱하고 분석하는 것을 도와주는 도구이다.** 리눅스의 `traceroute` 명령어와 흡사한 작업을 도와준다고 생각하면 된다.

![600](https://csocrates-s3.s3.ap-northeast-2.amazonaws.com/VPC%20Reachability%20Analyzer%20/%20%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-07-19%20%EC%98%A4%ED%9B%84%206.17.26.png)

___
### 써먹어 보기

프라이빗 서브넷 내부에 존재하는 엘라스틱 캐시와 퍼블릭 서브넷에 존재하는 인스턴스가 어떻게 연결되는지 확인해보자. 네트워크 인터페이스를 기반으로 연결 경로를 탐색한다. 사용하는 프로토콜은 TCP로 설정한다.

네트워크 인터페이스에 대한 정보는 ec2의 네트워크 인터페이스 탭 내부에서 확인할 수 있다.

![700](https://csocrates-s3.s3.ap-northeast-2.amazonaws.com/VPC%20Reachability%20Analyzer%20/%20%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-07-19%20%EC%98%A4%ED%9B%84%206.41.46.png)

경로를 분석하는데는 어느정도의 시간이 소요되고 분석이 완료되면 아래와 같은 결과를 확인할 수 있다. 확인해보면 우선적으로 보안 그룹을 지나고 이후 라우팅 테이블을 통해 연결이 되는 것을 확인할 수 있다. **두 eni 모두 별도의 보안이 존재하지 않고 라우팅 테이블을 통해 라우팅이 가능하므로 연결이 가능하다고 표시된다.**

![](https://csocrates-s3.s3.ap-northeast-2.amazonaws.com/VPC%20Reachability%20Analyzer%20/%20%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-07-19%20%EC%98%A4%ED%9B%84%206.47.17.png)
만약 라우팅 테이블 설정을 변경해 서브넷 간의 라우팅을 불가능하게 설정하거나 보안그룹에서 TCP를 차단하면 경로 설정이 불가해진다.
___
### 결론

VPC 접근 분석기는 편리한 도구로 만약 유저가 직접 각 인스턴스 간의 연결 경로가 존재하는지를 확인하려면 생각보다 번잡한 작업을 진행해야 할 것이 틀림 없다. (ping을 쏴보거나 netcat 등의 도구로 연결 여부를 확인하는 재앙이 발생할 것)

분석기를 활용하면 손쉽게 현재 인스턴스의 접근 가능 여부 파악이 가능하고 나아가서는 경로를 생성하는 작업까지 수행할 수 있다.
