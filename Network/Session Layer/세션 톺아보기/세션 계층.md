
## 세션 계층 이란?
- 세션계층은 OSI 7계층 중 5번째의 계층
- 세션 계층부터는 어플리케이션에 관련된 층이다.
	- 1~4계층이 주된 기능은 "목적지 까지 데이터를 잘 전송하는 것"이 목표였다면 5계층인 세션 계층 부터는 데이터를 송수신하는 양측 노드내의 프로세스간의 통신 프로토콜이라고 생각하면 된다.
- 말 그대로 "세션"을 관리하는 계층이다
- 단위 : 메세지

## 세션이란?
- 세션은 영구적이고 상호작용적인 정보 교환을 전제하는 둘 이상의 통신 장치나 컴퓨터와 사용자 간의 대화나 송수신 연결상태를 의미하는 보안적인 다이얼로그(dialogue) 및 시간대를 가리킨다. - 위키 백과 -
	-> 즉 네트워크 상에서 클라이언트와 서버 간의 연결 자체를 세션이라고 부른다.

### 세션 계층 vs 전송 계층  
다운로드 과정에서 TCP연결이 끊겨 전송이 중단됨  
* 세션 기능이 없으면 : 서버와 다시 연결해 처음부터 다운로드 작업을 실행해야함  
* 세션 기능이 있으면 : 복구후 이미 다운로드된 내용 이후부터 연속해서 전송받을수 있음


## 세션계층의 역할
- 결국 이 세션을 연결하고 제어하고 끊는것이 세션계층의 일

- 동기 (Synchronization)
	- 통신의 양 호스트끼리 서로 동의하는 논리적 동기점을 생성
		- 메세지가 제대로 처리되고 있는지 파악
	- 동기점 : 오류 복구를 위해서 사용하는 개념
		- 동기점 이전 까지는 이미 제대로 처리가 된 상태
		- 동기점 이후 부터 복구 절차가 진행
		- 부(소)동기점 : 하나의 대화 단위 내에서 데이터 전달을 제어하는 역할 (ACK 받지 않음)
		- 주(대)동기점 : 전송하는 각 데이터 처음과 끝에 사용. 데이터를 대화 단위로 구성 (반드시 ACK 받음)
	- 재동기 : 전송 오류가 발생했을 때 동기점을 이용하여 복구하는 과정

- **대화 기능**
	- 데이터 전송 과정을 의미
	- 데이터 교환을 구조화하고, 교환하는 데이터의 흐름을 관리합니다. (예를 들어, 어떤 데이터가 언제 전송될지를 결정)
	- 동작 방식을 정할 수 있다. 
		- 전이중, 반이중, 단방향을 결정


- 토큰 (Dialogue Control)
	- 두 호스트의 대화를 관리하는 특수 메세지
	- 토큰을 보유한다는 것은 토큰에 부여된 권리를 배타적으로 소유한다는 것.
	- 데이터 토큰 : 데이터를 전송할 수 있는 권한을 의미
	- 해제 토큰 : 통신 양단 사이의 연결 해제를 제어하는 목적으로 사용
	- 동기 토큰 : 동기 처리가 필요한 시점 (ex. 오류 발생 시)

	- 5계층 프로토콜인 NetBIOS에서의 토큰 사용 방식
		NetBIOS는 세션 계층에서 토큰 기반의 메커니즘을 사용하여 네트워크 상의 여러 컴퓨터 간의 세션 및 통신을 관리합니다. 토큰의 사용 방식은 다음과 같습니다:
	- 세션 설정
		- NetBIOS는 컴퓨터 간의 세션을 시작할 때, 토큰을 사용하여 양쪽 장치 간의 통신 권한을 설정
		- 이 과정에서 토큰은 세션을 시작하는 장치에서 수신 장치로 전달
        - 세션 유지 
		- 세션이 유지되는 동안, 토큰은 데이터 전송 권한을 제어하는 데 사용
		- 토큰을 가진 장치만이 데이터를 전송할 수 있으며, 전송이 완료되면 토큰은 다음 장치로 전달
	- 세션 종료 (Session Termination)
		- 통신이 종료될 때, 토큰은 세션을 종료하는 신호로 사용
		- 이는 네트워크 상의 다른 장치들이 해당 세션에 더 이상 데이터를 전송하지 않음을 나타냄.



![](https://sunnnyimg.s3.ap-northeast-2.amazonaws.com/%EC%84%B8%EC%85%98%20%EA%B3%84%EC%B8%B5%20/%20%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-12-01%20%EC%98%A4%ED%9B%84%206.09.12.png)
![](https://sunnnyimg.s3.ap-northeast-2.amazonaws.com/%EC%84%B8%EC%85%98%20%EA%B3%84%EC%B8%B5%20/%20Pasted%20image%2020231201165152.png)

## 세션의 종류
### 다중 세션 연결
![](https://sunnnyimg.s3.ap-northeast-2.amazonaws.com/%EC%84%B8%EC%85%98%20%EA%B3%84%EC%B8%B5%20/%20Pasted%20image%2020231201171659.png)
- 하나의 서버가 다중 세션을 모드 처리하는 것 
- 하나하나 세션 연결의 대화 시간이 짧을 경우 유리
- 대화 시간이 길어지면 다른 클라이언트의 대기 시간이 늘어날 수 있다.

### 단일 세션 연결
![](https://sunnnyimg.s3.ap-northeast-2.amazonaws.com/%EC%84%B8%EC%85%98%20%EA%B3%84%EC%B8%B5%20/%20Pasted%20image%2020231201171710.png)
- 하나의 서버 프로세스가 하나의 클라이언트와 단일 연결
- 초기 서비스 환경 구축에 따른 오버헤드가 증가
- 각 클라이언트가 독립적으로 대화를 받을 수 있음



## 대표적인 5계층 프로토콜
- SSL&TLS
- NetBIOS (Network Basic Input/Output System) : 로컬 네트워크 환경에서 컴퓨터 간의 통신 세션을 설정하고 관리하는데 사용.
	- 네트워크에 대한 기본적인 입출력((Net + BIOS) 이라는 뜻으로 합성된 용어
	- tcp/ip 등을 이용해서 네트워크 연결을 이룬 세션의 연결 설정 및 해제에 관계
![](https://sunnnyimg.s3.ap-northeast-2.amazonaws.com/%EC%84%B8%EC%85%98%20%EA%B3%84%EC%B8%B5%20/%20%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-12-01%20%EC%98%A4%ED%9B%84%206.02.09.png)
- PPTP (Point-to-Point Tunneling Protocol) 


#### TCP/IP 모델과의 비교
- 세션 계층의 기능은 TCP/IP 모델에서는 주로 전송 계층(TCP)과 응용 계층에서 처리

## Reference
https://copycode.tistory.com/109
https://doingsomething.tistory.com/88
http://www.ktword.co.kr/test/view/view.php?m_temp1=1957
https://mintnlatte.tistory.com/60
https://naon.me/posts/til90
https://www.youtube.com/watch?v=wL65WRvqkh0
https://www.youtube.com/watch?v=ORR3tAAz4F4
https://www.youtube.com/watch?v=2iFFRqzX3yE&t=335s